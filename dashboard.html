<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - JOMPO FarmLink</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
  <script src="app.js" defer></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-green-50">

  <!-- NAVBAR -->
  <nav class="bg-green-700 text-white p-4 flex justify-between items-center">
    <h1 class="text-xl font-bold">JOMPO FarmLink</h1>
    <div id="authLinks" class="flex items-center gap-2"></div>
  </nav>

  <!-- MAIN DASHBOARD CONTAINER -->
  <div class="p-4 max-w-7xl mx-auto">

    <!-- SEARCH & FILTER -->
    <div class="mb-6 flex flex-col sm:flex-row gap-3 items-center justify-between">
      <input type="text" id="searchProducts" placeholder="Search products or services..." class="border rounded px-3 py-2 flex-1">
      <select id="filterCategory" class="border rounded px-3 py-2">
        <option value="">All Categories</option>
        <option value="cereals">Cereals</option>
        <option value="vegetables">Vegetables</option>
        <option value="onions">Onions</option>
        <option value="services">Services</option>
      </select>
    </div>

    <!-- ADD LISTING FORM -->
    <div class="bg-white p-4 rounded shadow mb-6">
      <h2 class="font-bold text-green-700 mb-3">Add Product/Service</h2>
      <form id="addListingForm" class="flex flex-col gap-3">
        <input type="text" id="productName" placeholder="Product/Service Name" class="border px-3 py-2 rounded w-full" required>
        <select id="category" class="border px-3 py-2 rounded w-full" required>
          <option value="">Select Category</option>
          <option value="cereals">Cereals</option>
          <option value="vegetables">Vegetables</option>
          <option value="onions">Onions</option>
          <option value="services">Services</option>
        </select>
        <input type="number" id="quantity" placeholder="Quantity (kg)" class="border px-3 py-2 rounded w-full">
        <input type="number" id="price" placeholder="Price (KSh)" class="border px-3 py-2 rounded w-full" required>
        <input type="text" id="locationListing" placeholder="Location" class="border px-3 py-2 rounded w-full" required>
        <input type="file" id="listingImage" class="border rounded px-3 py-2 w-full">
        <button type="submit" class="bg-green-500 hover:bg-green-600 text-white py-2 rounded">Add Listing</button>
      </form>
    </div>

    <!-- LISTINGS GRID -->
    <h2 class="font-bold text-green-700 mb-3">Your Products & Services</h2>
    <div id="listingsContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>

    <!-- FARM RECORDS -->
    <div class="bg-white p-4 rounded shadow mt-6">
      <h2 class="font-bold text-green-700 mb-3">Farm Records</h2>
      <form id="farmRecordForm" class="flex flex-col gap-2">
        <input type="text" id="cropName" placeholder="Crop Name" class="border px-3 py-2 rounded" required>
        <input type="number" id="harvestQty" placeholder="Harvest Quantity (kg)" class="border px-3 py-2 rounded" required>
        <button type="submit" class="bg-green-500 hover:bg-green-600 text-white py-2 rounded">Add Record</button>
      </form>
      <ul id="recordsList" class="mt-2 list-disc pl-5"></ul>
    </div>

    <!-- COMMUNITY -->
    <div class="bg-white p-4 rounded shadow mt-6">
      <h2 class="font-bold text-green-700 mb-3">Community</h2>
      <form id="communityForm" class="flex flex-col gap-2">
        <input type="text" id="userName" placeholder="Your Name" class="border px-3 py-2 rounded" required>
        <textarea id="message" placeholder="Write a message..." class="border px-3 py-2 rounded" required></textarea>
        <button type="submit" class="bg-green-500 hover:bg-green-600 text-white py-2 rounded">Post</button>
      </form>
      <ul id="communityPosts" class="mt-2 list-disc pl-5"></ul>
    </div>

    <!-- SUPPORT -->
    <div class="bg-white p-4 rounded shadow mt-6">
      <h2 class="font-bold text-green-700 mb-3">Support</h2>
      <form id="supportForm" class="flex flex-col gap-2">
        <input type="text" placeholder="Your Name" class="border px-3 py-2 rounded" required>
        <textarea placeholder="Your message" class="border px-3 py-2 rounded" required></textarea>
        <button type="submit" class="bg-green-500 hover:bg-green-600 text-white py-2 rounded">Send</button>
      </form>
      <p id="supportResponse" class="mt-2 text-green-600"></p>
    </div>

  </div>

  <!-- AI CHATBOT -->
  <div id="chatbotBubble" class="fixed bottom-5 right-5 bg-green-700 p-3 shadow-lg cursor-pointer">
    <img src="message-icon.svg" alt="Chat" class="w-10 h-10">
  </div>
  <div id="chatbotWindow" class="fixed bottom-20 right-5 w-80 h-96 bg-white border shadow-lg rounded flex flex-col hidden">
    <div class="bg-green-700 text-white p-3 flex justify-between items-center rounded-t">
      <span>JOMPO Assistant</span>
      <button id="chatbotClose">âœ–</button>
    </div>
    <div id="chatbotMessages" class="flex-1 p-3 overflow-y-auto"></div>
    <div class="p-3 flex gap-2">
      <input type="text" id="chatbotText" class="border px-3 py-2 rounded flex-1" placeholder="Type your message...">
      <button id="sendChat" class="bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded">Send</button>
    </div>
  </div>

</body>
</html>
